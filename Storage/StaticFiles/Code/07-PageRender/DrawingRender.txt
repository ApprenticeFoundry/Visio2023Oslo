
    public async Task RenderDrawing(Canvas2DContext ctx, int tick, double fps)
    {

        if (IsCurrentlyProcessing) return;

        FoGlyph2D.Animations.Update((float)0.033);

        var wasDirty = FoGlyph2D.ResetHitTesting;
        RefreshHitTest_IfDirty();

        var page = PageManager.CurrentPage();

        page.Color = InputStyle == InputStyle.FileDrop ? "Yellow" : "Grey";

        await ScaleDrawing.ClearCanvas(ctx);

        await ctx.SaveAsync();
        var (zoom, panx, pany) = await PanZoomService.TranslateAndScale(ctx, page);

        await PageManager.RenderDetailed(ctx, tick, true);
        await PanZoomWindow().RenderConcise(ctx, zoom, page.Rect());

        await ctx.RestoreAsync();


        await GetInteraction().RenderDrawing(ctx, tick);

        await ctx.SetFillStyleAsync(wasDirty ? "#FF0000" : "#000000");

...
  
    }